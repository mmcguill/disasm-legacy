///////////////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "Studio.h"
#include "ResourcesFrm.h"
#include "ResourcesView.h"

///////////////////////////////////////////////////////////////////////////////

#ifdef _DEBUG
#define new DEBUG_NEW
#undef THIS_FILE
static char THIS_FILE[] = __FILE__;
#endif

///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
// CResBaseFrame

IMPLEMENT_DYNCREATE(CResBaseFrame, CMDIChildWnd)

///////////////////////////////////////////////////////////////////////////////

CResBaseFrame::CResBaseFrame()
{
}

///////////////////////////////////////////////////////////////////////////////

CResBaseFrame::~CResBaseFrame()
{
}

///////////////////////////////////////////////////////////////////////////////

BEGIN_MESSAGE_MAP(CResBaseFrame, CMDIChildWnd)
	//{{AFX_MSG_MAP(CIconFrame)
	ON_WM_CREATE()
	//}}AFX_MSG_MAP
END_MESSAGE_MAP()

///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
// CIconFrame

IMPLEMENT_DYNCREATE(CIconFrame, CMDIChildWnd)

///////////////////////////////////////////////////////////////////////////////

CIconFrame::CIconFrame()
{
}

///////////////////////////////////////////////////////////////////////////////

CIconFrame::~CIconFrame()
{
}

///////////////////////////////////////////////////////////////////////////////

BEGIN_MESSAGE_MAP(CIconFrame, CMDIChildWnd)
	//{{AFX_MSG_MAP(CIconFrame)
	ON_WM_CREATE()
	//}}AFX_MSG_MAP
	ON_CBN_SELCHANGE(IDC_CMBDEV, OnCmbChange )
END_MESSAGE_MAP()

///////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////
// CIconFrame message handlers

int CIconFrame::OnCreate(LPCREATESTRUCT lpCreateStruct) 
{
	if (CMDIChildWnd::OnCreate(lpCreateStruct) == -1)
		return -1;
	m_wndHeadBar.Create(this,IDD_ICONFRAMEHEAD,WS_CHILD | WS_VISIBLE | CBRS_TOP | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY,AFX_IDW_TOOLBAR);
	return 0;
}

///////////////////////////////////////////////////////////////////////////////

void CIconFrame::AddDevImage(CString &strImg)
{
	CComboBox* pcmb = (CComboBox*)m_wndHeadBar.GetDlgItem(IDC_CMBDEV);
	pcmb->AddString(strImg);
	pcmb->SetCurSel(0);
}

///////////////////////////////////////////////////////////////////////////////

void CIconFrame::OnCmbChange()
{
	CIconView* pView = (CIconView*)GetActiveView();
	CComboBox* pcmb = (CComboBox*)m_wndHeadBar.GetDlgItem(IDC_CMBDEV);
	pView->SetIconIndex(pcmb->GetCurSel());
}

///////////////////////////////////////////////////////////////////////////////

void CIconFrame::SetHotSpot(BOOL bShow, CPoint ptHot)
{
	if(bShow){
		CString strHot;
		strHot.Format(IDS_ICONVIEW_CURSOR_HOTSPOT,ptHot.x,ptHot.y);
		m_wndHeadBar.SetDlgItemText(IDC_STHOTSPOT,strHot);
		m_wndHeadBar.GetDlgItem(IDC_STHOTSPOT)->ShowWindow(SW_SHOW);
	}
	else{
		m_wndHeadBar.GetDlgItem(IDC_STHOTSPOT)->ShowWindow(SW_HIDE);
	}
}

///////////////////////////////////////////////////////////////////////////////